<!DOCTYPE html>
<html lang="pt-BR" data-theme="dracula" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head(${setor.id == null} ? 'Novo Setor' : 'Editar Setor')}"></head>
<body class="bg-black text-green-400 min-h-screen flex flex-col">
<!-- Header -->
<nav th:replace="~{fragments/header :: navbar}"></nav>

<div class="container mx-auto p-6 max-w-lg">
    <h1 class="text-2xl font-bold mb-4" th:text="${setor.id == null} ? 'Cadastrar Setor' : 'Editar Setor'"></h1>

    <div th:if="${message}" class="alert alert-success mb-4" th:text="${message}"></div>

    <form th:object="${setor}"
          th:action="${setor.id == null} ? @{/setor/form} : @{/setor/{id}(id=${setor.id})}"
          method="post" class="space-y-4">
        <input type="hidden" th:if="${setor.id != null}" th:field="*{id}" />
        <input type="hidden" th:if="${setor.id != null}" name="_method" value="put"/>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="form-control">
            <label class="label"><span class="label-text text-green-300">Nome</span></label>
            <input th:field="*{nome}" class="input input-bordered bg-gray-900 text-green-200" placeholder="Nome do Setor" required/>
            <p th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}" class="text-error text-sm mt-1"></p>
        </div>

        <div class="form-control">
            <label class="label"><span class="label-text text-green-300">Capacidade Máxima</span></label>
            <input type="number" min="0" th:field="*{capacidadeMaxima}" class="input input-bordered bg-gray-900 text-green-200" placeholder="Capacidade" required/>
            <p th:if="${#fields.hasErrors('capacidadeMaxima')}" th:errors="*{capacidadeMaxima}" class="text-error text-sm mt-1"></p>
        </div>

        <div class="form-control">
            <label class="label"><span class="label-text text-green-300">Pátio</span></label>
            <select th:field="*{patioId}" class="select select-bordered bg-gray-900 text-green-200" required>
                <option value="" disabled th:selected="${setor.patioId == null}">Selecione um Pátio</option>
                <option th:each="p : ${patios}" th:value="${p.id}" th:text="${p.nome}"></option>
            </select>
            <p th:if="${#fields.hasErrors('patioId')}" th:errors="*{patioId}" class="text-error text-sm mt-1"></p>
        </div>

        <div class="flex space-x-2">
            <button type="submit" class="btn btn-success">Salvar</button>
            <a href="/setor" class="btn btn-ghost">Cancelar</a>
        </div>
    </form>
</div>
</body>
</html>
